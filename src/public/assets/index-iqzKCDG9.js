import{a as o,h as H,an as e,aC as I,ao as D}from"./index-ewVy9M9d.js";import{n as R,o as _,e as S,p as V,s as M,f as U,g as q,q as z,h as $,r as Y,i as J,U as W,t as X,v as Z,D as B}from"./ErpApp-7Wu0aHhn.js";import{J as G,aH as h,ax as K,B as x,T as A,aZ as F,aP as c,aU as P,aV as u}from"./IdurarOs-eHlzvnv3.js";var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zm-40 600H184V312h528v528zm168-728H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM300 550h296v64H300z"}}]},name:"switcher",theme:"outlined"};const ee=Q;var te=function(a,s){return o.createElement(G,H({},a,{ref:s,icon:ee}))};const se=o.forwardRef(te),{Search:ae}=K;function ne({config:t}){const{crudContextAction:a}=S(),{collapsedBox:s,panel:n}=a,r=()=>{n.open(),s.close()};return e.jsx(x,{onClick:r,type:"primary",className:"text-[white] bg-teal-300 min-h-10 px-8 cursor-pointer mt-7 right",children:"Create Client"})}function le({config:t,setAlignValue:a,filterTable:s}){return h(),e.jsx(e.Fragment,{children:e.jsx(R,{title:"",extra:[e.jsx("div",{className:"grid justify-between",style:{gridTemplateColumns:"auto auto"},children:e.jsx("div",{className:"grid gap-x-5 justify-start ",style:{gridTemplateColumns:"auto auto minmax(auto, 1060px)"},children:e.jsxs("div",{className:"grid gap-y-1.5",children:[e.jsx("p",{children:"Search Client"}),e.jsx(ae,{placeholder:"Search by task name ...",className:"task-search",onSearch:s,enterButton:!0})]})})},1),e.jsx(ne,{config:t},`${_.generate()}`)],style:{padding:"20px 0px"}})})}function re({data:t,editItem:a,removeItem:s}){return console.log(t),e.jsxs("div",{className:"relative mt-4",children:[e.jsxs("div",{className:"grid rounded-lg items-center p-3 border-2 gap-4",style:{gridTemplateColumns:"40px auto"},children:[e.jsx("div",{className:"text-[16px] flex items-center justify-center w-[40px] h-[40px] rounded-full text-white",style:{background:"rgb(115, 192, 255)"},children:t.name&&t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"grid gap-1 mb-2",children:e.jsx("p",{children:t.name})}),e.jsx(V,{className:"rounded-full py-0.5 px-3",color:"warning",children:`${t.hourlyrate} ${t.currency} / hour`})]})]}),e.jsxs("div",{className:"absolute grid gap-2",style:{top:"-12px",right:"15px",gridTemplateColumns:"1fr 1fr 1fr"},children:[e.jsx("div",{className:"client-card-control",onClick:a,children:e.jsx(A,{placement:"top",title:"Edit",children:e.jsx(F,{})})}),e.jsx("div",{className:"client-card-control",onClick:a,children:e.jsx(A,{placement:"top",title:"Archive",children:e.jsx(se,{})})}),e.jsx("div",{className:"client-card-control",onClick:s,children:e.jsx(A,{placement:"top",title:"Remove",children:"X"})})]})]})}function ce({config:t}){let{entity:a,searchConfig:s}=t;h();const n=I(),{crudContextAction:r}=S(),{panel:p,collapsedBox:d,modal:g,readBox:w,editBox:j,advancedBox:L}=r,{result:i,isLoading:y}=D(M),{pagination:k,items:f}=i,[m,v]=o.useState("active"),C=l=>{n(c.currentItem({data:l})),n(c.currentAction({actionType:"delete",data:l})),g.open()},b=l=>{console.log(l),n(c.currentItem({data:l})),n(c.currentAction({actionType:"update",data:l})),j.open(),p.open(),d.open()},N=l=>{const T={q:l,fields:(s==null?void 0:s.searchFields)||""};n(c.list({entity:a,options:T}))},O=()=>{const l={page:1,items:100};n(c.list({entity:a,options:l}))};return o.useEffect(()=>{O()},[]),e.jsxs("div",{children:[e.jsx(le,{config:t,setAlignValue:v,filterTable:N}),e.jsxs("div",{className:"grid",children:[m==="active"&&e.jsxs("div",{className:"",children:[e.jsx("p",{children:"All Clients"}),e.jsx("div",{className:"grid gap-3 mt-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))"},children:f.map((l,T)=>e.jsx(re,{data:l,editItem:()=>b(l),removeItem:()=>C(l)},T))})]}),m==="archived"&&e.jsxs("div",{className:"",children:[e.jsx("p",{children:"Archived Clients"}),e.jsx("div",{className:"grid gap-3 mt-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))"}})]})]})]})}function ie({config:t,formElements:a,withUpload:s}){const n=h(),{crudContextAction:r,state:p}=S(),{deleteModalLabels:d}=t,{modal:g,editBox:w}=r,{isReadBoxOpen:j,isEditBoxOpen:L}=p,{result:i}=D($),y=I(),[k,f]=o.useState("");o.useEffect(()=>{if(i){const b=d.map(N=>i[N]).join(" ");f(b)}},[i]);const m=()=>{y(c.currentAction({actionType:"delete",data:i})),g.open()},v=()=>{y(c.currentAction({actionType:"update",data:i})),w.open()},C=j||L?{opacity:1}:{opacity:0};return e.jsxs(e.Fragment,{children:[e.jsxs(P,{style:C,gutter:24,children:[e.jsx(u,{span:10,children:e.jsx("p",{style:{marginBottom:"10px"},children:k})}),e.jsxs(u,{span:14,children:[e.jsx(x,{onClick:m,type:"text",icon:e.jsx(Y,{}),size:"small",style:{float:"right",marginLeft:"5px",marginTop:"10px"},children:n("remove")}),e.jsx(x,{onClick:v,type:"text",icon:e.jsx(F,{}),size:"small",style:{float:"right",marginLeft:"0px",marginTop:"10px"},children:n("edit")})]}),e.jsx(u,{span:24,children:e.jsx("div",{className:"line"})}),e.jsx("div",{className:"space10"})]}),e.jsx(J,{config:t}),e.jsx(W,{config:t,formElements:a,withUpload:s})]})}function oe({config:t}){return e.jsxs(P,{gutter:8,children:[e.jsx(u,{className:"gutter-row",span:21,children:e.jsx(X,{config:t})}),e.jsx(u,{className:"gutter-row",span:3,children:e.jsx(x,{onClick:addNewItem,block:!0,icon:e.jsx(Z,{})})})]})}function de({config:t,createForm:a,updateForm:s,withUpload:n=!1}){const r=I();return o.useLayoutEffect(()=>{r(c.resetState())},[]),e.jsxs(U,{config:t,fixHeaderPanel:e.jsx(oe,{config:t}),sidePanelBottomContent:e.jsx(q,{config:t,formElements:a,withUpload:n}),sidePanelTopContent:e.jsx(ie,{config:t,formElements:s,withUpload:n}),children:[e.jsx(ce,{config:t}),e.jsx(z,{config:t})]})}const E={name:{label:"client name",type:"string",required:!0},hourlyrate:{label:"client hourly rate",type:"number",required:!0},currency:{label:"currency",type:"select",defaultValue:"USA",required:!0,options:[{value:"USD",label:"USD"},{value:"CAD",label:"CAD"},{value:"EUR",label:"EUR"}]},contactnr:{label:"contact nr",type:"string"},contactphone:{label:"contact phone",type:"phone"},contactgmail:{label:"contact email",type:"email"},companyaddress:{label:"company address",type:"address"},vatid:{label:"vat id",type:"string"},regnr:{label:"reg nr",type:"string"},defaulttask:{label:"default tasks",type:"defaulttask"},created:{label:"created on",type:"date",required:!0,disableForForm:!0}};function xe(){const t=h(),a="client",s={displayLabels:["name"],searchFields:["name","contactphone","contactgmail","companyaddress","vatid","regnr","contactnr","currency"]},n=["name"],r={PANEL_TITLE:t("client"),DATATABLE_TITLE:t("client_list"),ADD_NEW_ENTITY:t("add_new_client"),ENTITY_NAME:t("client")},d={...{entity:a,...r},fields:E,searchConfig:s,deleteModalLabels:n};return e.jsx(de,{createForm:e.jsx(B,{fields:E}),updateForm:e.jsx(B,{fields:E}),config:d})}export{xe as default};
