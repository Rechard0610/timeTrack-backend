import{a as d,an as r}from"./index-ewVy9M9d.js";import{aV as j,aK as T}from"./IdurarOs-eHlzvnv3.js";import{C as y,a as C,L as M,B as $,p as x,b as w,c as B,f as E}from"./index-Fkcs_BTR.js";y.register(C,M,$,x,w,B);const R=({status:n,dateRange:u=7,userId:i="",selectedDate:p=""})=>{const c="dashboard/projectChart",[l,h]=d.useState(null),m=e=>{let t=Math.floor(e),a=Math.floor(t/3600),s=Math.floor(t%3600/60),o=t%60;return`${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},g=e=>{let t=e*3600,a=Math.floor(t/3600),s=Math.floor(t%3600/60),o=Math.floor(t%60);return a=a<10?"0"+a:a,s=s<10?"0"+s:s,o=o<10?"0"+o:o,`${a}:${s}:${o}`},b=async()=>{const e={status:n,range:u,userId:i,selectedDate:p},t=await T.post({entity:c,jsonData:e}),a={label:[],spentTime:[],budget:[]};t.result&&t.result.map(s=>{a.label.push(`${s.projectnumber} ${s.description}`),a.spentTime.push(s.spentTime),a.budget.push(s.budget)}),h(a)};d.useEffect(()=>{b()},[i,p]);const f={responsive:!0,plugins:{legend:{display:!0,position:"right"},title:{display:!0,text:n==="Finished"?"Finished Projects":"Ongoing Projects"},tooltip:{callbacks:{label:function(e){if(e.datasetIndex===1){let t=e.dataset.label||"";return t&&(t+=": "),e.parsed.y!==null&&(t+=m(e.parsed.y*3600)),t}else if(e.datasetIndex===0){let t=e.dataset.label||"";return t+=":",t+=g(e.parsed.y)}}}}}},S={labels:l&&l.label,datasets:[{label:"Total time",data:l&&l.budget&&l.budget.map(e=>e),backgroundColor:"rgb(244 63 94)"},{label:"Spent Time",data:l&&l.spentTime&&l.spentTime.map(e=>e/3600),backgroundColor:"green"}]};return r.jsx(j,{className:"gutter-row",xs:{span:48},sm:{span:24},md:{span:24},lg:{span:12},children:r.jsx("div",{className:"whiteBox shadow p-5",style:{color:"#595959",fontSize:13,height:"100%"},children:r.jsx(E,{data:S,options:f})})})},_=R;export{_ as R};
