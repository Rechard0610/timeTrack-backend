import{aC as E,aB as N,ao as f,a as d,an as e,aK as A,aS as I}from"./index-ewVy9M9d.js";import{aH as y,B as m,aZ as b,aX as B,b2 as P,b3 as S}from"./IdurarOs-eHlzvnv3.js";import{L as $,n as v,o as p}from"./ErpApp-7Wu0aHhn.js";import{E as x}from"./index-IjoPjNv1.js";import{e as h}from"./actions-cTR2S2ig.js";import{c as R,s as w}from"./selectors-c3wjZmkY.js";import{C as D}from"./CloseCircleOutlined-QfALGiz_.js";const{Title:j,Paragraph:M}=P;function k({config:s,selectedItem:a}){const t=y(),{entity:r,ENTITY_NAME:o}=s,i=E(),{erpContextAction:_}=$(),l=N(),{result:c}=f(R),{readPanel:u,updatePanel:g}=_,T={emailName:"",emailKey:"",emailSubject:"",emailBody:"",emailVariables:[],_id:""},[n,C]=d.useState(a??T);return d.useEffect(()=>{const L=new AbortController;return c&&C(c),()=>L.abort()},[c]),e.jsxs(e.Fragment,{children:[e.jsx(v,{onBack:()=>{u.close(),l(`/${r.toLowerCase()}`)},title:`${o} # ${n==null?void 0:n.emailName}`,ghost:!1,extra:[e.jsx(m,{onClick:()=>{u.close(),l(`/${r.toLowerCase()}`)},icon:e.jsx(D,{}),children:t("Close")},`${p.generate()}`),e.jsx(m,{onClick:()=>{i(h.currentAction({actionType:"update",data:n})),g.open(),l(`/${r.toLowerCase()}/update/${n._id}`)},type:"primary",icon:e.jsx(b,{}),children:t("Edit")},`${p.generate()}`)],style:{padding:"20px 0px"}}),e.jsx(B,{dashed:!0}),e.jsxs("div",{children:[e.jsx(j,{level:3,children:t("Subject")}),e.jsx(M,{children:n.emailSubject}),e.jsx(j,{level:3,children:t("Body")}),e.jsx("div",{dangerouslySetInnerHTML:{__html:n.emailBody}})]})]})}function H({config:s}){const a=E(),{id:t}=A();d.useLayoutEffect(()=>{a(h.read({entity:s.entity,id:t}))},[t]);const{result:r,isSuccess:o,isLoading:i=!0}=f(w);return i?e.jsx(x,{children:e.jsx(I,{})}):e.jsx(x,{children:o?e.jsx(k,{config:s,selectedItem:r}):e.jsx(S,{entity:s.entity})})}function Z(){const s="email",a=y(),t={PANEL_TITLE:a("email_template"),DATATABLE_TITLE:a("email_template_list"),ADD_NEW_ENTITY:a("add_new_email_template"),ENTITY_NAME:a("email_template")},r={entity:s,create:!1,...t};return e.jsx(H,{config:r})}export{Z as default};
