import{a as W,R as v}from"./index-ewVy9M9d.js";function k(t){return t*Math.PI/180}function D(t,e,n){return t>n?n:t<e?e:t}function x(t,e){return e/100*t}function R(t,e){return t+e/2}function C(t,e){var n=k(t);return{dx:e*Math.cos(n),dy:e*Math.sin(n)}}function E(t){return typeof t=="number"}function M(t,e){return typeof t=="function"?t(e):t}function j(t,e){var n=Object.assign({},e,t);for(var a in e)t[a]===void 0&&(n[a]=e[a]);return n}function w(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].value;return e}function V(t){for(var e=t.data,n=t.lengthAngle,a=t.totalValue,r=t.paddingAngle,i=t.startAngle,l=a||w(e),s=D(n,-360,360),d=Math.abs(s)===360?e.length:e.length-1,c=Math.abs(r)*Math.sign(n),u=c*d,o=s-u,g=0,b=[],h=0;h<e.length;h++){var A=e[h],y=l===0?0:A.value/l*100,P=x(o,y),f=g+i;g=g+P+c,b.push(Object.assign({percentage:y,startAngle:f,degrees:P},A))}return b}function B(t,e){if(t==null)return{};var n={},a=Object.keys(t),r,i;for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function z(t){var e=t.renderLabel,n=t.labelProps,a=e(n);if(typeof a=="string"||typeof a=="number"){n.dataEntry,n.dataIndex;var r=B(n,["dataEntry","dataIndex"]);return v.createElement("text",Object.assign({dominantBaseline:"central"},r),a)}return v.isValidElement(a)?a:null}function I(t){var e=1e14;return Math.round((t+Number.EPSILON)*e)/e}function T(t){var e=t.labelPosition,n=t.lineWidth,a=t.labelHorizontalShift,r=I(a);if(r===0)return"middle";if(e>100)return r>0?"start":"end";var i=100-n;return e<i?r>0?"end":"start":"middle"}function N(t,e){return t.map(function(n,a){var r,i=(r=M(e.segmentsShift,a))!=null?r:0,l=x(e.radius,e.labelPosition)+i,s=C(R(n.startAngle,n.degrees),l),d=s.dx,c=s.dy,u={x:e.center[0],y:e.center[1],dx:d,dy:c,textAnchor:T({labelPosition:e.labelPosition,lineWidth:e.lineWidth,labelHorizontalShift:d}),dataEntry:n,dataIndex:a,style:M(e.labelStyle,a)};return u})}function F(t,e){var n=e.label;if(n)return N(t,e).map(function(a,r){return v.createElement(z,{key:"label-"+(a.dataEntry.key||r),renderLabel:n,labelProps:a})})}var H=function(e,n,a,r,i){var l=i-r;if(l===0)return[];var s=a*Math.cos(r)+e,d=a*Math.sin(r)+n,c=a*Math.cos(i)+e,u=a*Math.sin(i)+n,o=Math.abs(l)<=Math.PI?"0":"1",g=l<0?"0":"1";return[["M",s,d],["A",a,a,0,o,g,c,u]]},K=H,$=K;function X(t,e,n,a,r){var i=D(a,-359.999,359.999);return $(t,e,r,k(n),k(n+i)).map(function(l){return l.join(" ")}).join(" ")}function O(t){var e=t.cx,n=t.cy,a=t.lengthAngle,r=t.lineWidth,i=t.radius,l=t.shift,s=l===void 0?0:l,d=t.reveal,c=t.rounded,u=t.startAngle,o=t.title,g=B(t,["cx","cy","lengthAngle","lineWidth","radius","shift","reveal","rounded","startAngle","title"]),b=i-r/2,h=C(R(u,a),s),A=h.dx,y=h.dy,P=X(e+A,n+y,u,a,b),f,S;if(E(d)){var L=k(b)*a;f=Math.abs(L),S=f-x(f,d)}return v.createElement("path",Object.assign({d:P,fill:"none",strokeWidth:r,strokeDasharray:f,strokeDashoffset:S,strokeLinecap:c?"round":void 0},g),o&&v.createElement("title",null,o))}function Y(t,e,n){var a="stroke-dashoffset "+t+"ms "+e;return n&&n.transition&&(a=a+","+n.transition),{transition:a}}function q(t){return t.animate&&!E(t.reveal)?100:t.reveal}function m(t,e){return t&&function(n){t(n,e)}}function G(t,e,n){var a=n??q(e),r=e.radius,i=e.center,l=i[0],s=i[1],d=x(r,e.lineWidth),c=t.map(function(u,o){var g=M(e.segmentsStyle,o);return v.createElement(O,{cx:l,cy:s,key:u.key||o,lengthAngle:u.degrees,lineWidth:d,radius:r,rounded:e.rounded,reveal:a,shift:M(e.segmentsShift,o),startAngle:u.startAngle,title:u.title,style:Object.assign({},g,e.animate&&Y(e.animationDuration,e.animationEasing,g)),stroke:u.color,tabIndex:e.segmentsTabIndex,onBlur:m(e.onBlur,o),onClick:m(e.onClick,o),onFocus:m(e.onFocus,o),onKeyDown:m(e.onKeyDown,o),onMouseOver:m(e.onMouseOver,o),onMouseOut:m(e.onMouseOut,o)})});return e.background&&c.unshift(v.createElement(O,{cx:l,cy:s,key:"bg",lengthAngle:e.lengthAngle,lineWidth:d,radius:r,rounded:e.rounded,startAngle:e.startAngle,stroke:e.background})),c}var J={animationDuration:500,animationEasing:"ease-out",center:[50,50],data:[],labelPosition:50,lengthAngle:360,lineWidth:100,paddingAngle:0,radius:50,startAngle:0,viewBoxSize:[100,100]};function U(t){var e=j(t,J),n=W.useState(e.animate?0:null),a=n[0],r=n[1];W.useEffect(function(){e.animate&&r(null)},[]);var i=V(e);return v.createElement("svg",{viewBox:"0 0 "+e.viewBoxSize[0]+" "+e.viewBoxSize[1],width:"100%",height:"100%",className:e.className,style:e.style},G(i,e,a),F(i,e),e.children)}export{U as R};
